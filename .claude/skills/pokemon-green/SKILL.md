---
name: pokemon-green
description: "포켓몬 그린 버전 텍스트 RPG. 1세대 151마리 포켓몬, 165개 기술, 관동 지방 완전 재현. 사용자가 '포켓몬', '피카츄', '전투', '체육관', '야생', '도감', '새 게임', '이어하기' 등의 키워드를 사용할 때 활성화됩니다."
trigger-keywords: 포켓몬, pokemon, 피카츄, 체육관, 전투, 야생, 도감, 포켓몬스터, 새 게임, 이어하기, 포켓몬 그린
allowed-tools: Read, Write, Edit, Bash
---

# 포켓몬 그린 버전 - 텍스트 RPG

1세대 포켓몬 그린 버전을 텍스트 기반 RPG로 완전 재현한 클로드 스킬입니다.

## When to Invoke

이 스킬은 다음 상황에서 자동 활성화됩니다:

- 사용자가 "포켓몬", "피카츄", "포켓몬스터" 언급 시
- "새 게임", "이어하기", "게임 시작" 요청 시
- "전투", "체육관", "야생", "도감" 관련 대화 시
- "pokemon", "pikachu" 영어 키워드 사용 시

## 게임 특징

- **151마리 포켓몬**: 이상해씨부터 뮤까지 완전 수록
- **165개 기술**: 모든 1세대 기술 구현
- **15타입 상성**: 1세대 고유 버그 포함
- **관동 지방**: 태초마을부터 포켓몬 리그까지
- **8개 체육관**: 웅, 이슬, 마티스, 민화, 독수, 초련, 강연, 비주기
- **세이브/로드**: 10개 슬롯 + 자동저장
- **BGM 자동재생**: 45곡 (macOS afplay)
- **ASCII 아트**: 151마리 포켓몬 스프라이트
- **울음소리**: 151마리 포켓몬 울음소리

---

## 게임 시작

### 스킬 초기화 (중요)
스킬이 활성화되면 **즉시** 다음을 수행:
```bash
pkill -f 'pokemon-green.*bgm' 2>/dev/null
```

### BGM 재생 규칙 (필수)

**⚠️ 중요: 모든 BGM/효과음 재생 시 반드시 Bash 도구의 `run_in_background: true` 파라미터를 사용해야 합니다!**

- `run_in_background: true` 없이 실행하면 음악이 끝날 때까지 대화가 블로킹됩니다.
- BGM 중지(`pkill`)는 일반 실행, BGM 재생(`afplay`, `while true`)은 반드시 백그라운드 실행

```
# 올바른 BGM 재생 예시 (Bash 도구 호출 시)
command: "while true; do afplay [경로]/bgm/track.mp3; done"
run_in_background: true  ← 필수!

# 효과음 재생 예시
command: "afplay [경로]/bgm/effect.mp3"
run_in_background: true  ← 필수!
```

### 새 게임
```
"새 게임" 또는 "포켓몬 시작"
```

### 이어하기
```
"이어하기" 또는 "불러오기"
```

---

## 명령어 체계

### 필드 명령어

| 명령어 | 설명 | 예시 |
|--------|------|------|
| 북/남/동/서 | 해당 방향으로 이동 | "북쪽으로" |
| [장소명]으로 이동 | 특정 장소로 이동 | "회색시티로 이동" |
| 상태 / 파티 | 파티 포켓몬 확인 | "상태 확인" |
| 가방 | 소지품 확인 | "가방 열기" |
| 도감 | 포켓몬 도감 | "도감 보기" |
| 저장 | 게임 저장 | "저장" |
| 말 걸기 | NPC 대화 | "말 걸기" |

### 전투 명령어

| 명령어 | 설명 |
|--------|------|
| 싸운다 | 기술 선택 모드 |
| [기술명] / [번호] | 기술 사용 |
| 가방 | 아이템 사용 |
| 포켓몬 | 포켓몬 교체 |
| 도망 | 야생 전투에서 도망 |

### 오디오 명령어

| 명령어 | 설명 |
|--------|------|
| bgm 끄기 | BGM 중지 |
| bgm 켜기 | BGM 재생 |
| 볼륨 [0-100] | 볼륨 조절 |
| 울음소리 | 포켓몬 울음소리 |

### 기술 효과음 규칙 (필수)

**⚠️ 중요: 전투 중 기술 사용 시 반드시 효과음을 재생해야 합니다!**

```
# 기술 사용 순서 (매 턴 필수)
1. "[포켓몬]의 [기술]!" 메시지 표시
2. 기술 효과음 재생 (run_in_background: true)
   - data/audio/sfx-mapping.json에서 기술명으로 파일 조회
   - 없으면 카테고리별 기본음 사용
3. 데미지/효과 계산 결과 표시
4. (효과 굉장함/별로일 때) 히트 효과음 재생
```

**효과음 파일 매핑**: `data/audio/sfx-mapping.json`
```json
{
  "몸통박치기": { "file": "tackle.mp3" },
  "울음소리": { "file": "growl.mp3" },
  "실뿜기": { "file": "stringshot.mp3" }
}
```

**효과음 재생 예시**:
```bash
# 기술 효과음 (run_in_background: true 필수!)
afplay [skillPath]/data/audio/sfx/tackle.mp3
```

---

## 게임 진행 흐름

### 오프닝
1. 오박사 인사
2. 플레이어 이름 설정
3. 라이벌 이름 설정

### 태초마을
1. 오박사 연구소에서 스타터 선택 (이상해씨/파이리/꼬부기)
2. 라이벌과 첫 배틀
3. 상록시티 소포 심부름

### 모험 시작
- 1번 도로 → 상록시티 → 상록숲 → 회색시티 (첫 체육관)
- 8개 뱃지 수집 → 챔피언 로드 → 사천왕 → 챔피언

---

## 전투 시스템

### ASCII 아트 표시 규칙 (필수)

**⚠️ 중요: 전투 시작 시 반드시 전체 ASCII 아트를 표시해야 합니다!**

| 상황 | 사용 파일 | 설명 |
|------|----------|------|
| **전투 시작** | `data/sprites/pokemon-ascii.json` | 상대 포켓몬 전체 아트 1회 표시 (필수!) |
| **전투 진행 중** | `data/sprites/pokemon-ascii-mini.json` | 매 턴 축소 아트로 간결하게 |
| **도감 확인** | `data/sprites/pokemon-ascii.json` | 전체 아트 + 상세 정보 |
| **파티 확인** | `data/sprites/pokemon-ascii-mini.json` | 축소 아트 |
| **NPC 대화** | `data/sprites/npc_ascii/[Name].json` | NPC 축소 아트 (방향별) |

```
# 전투 시작 시 순서
1. 기존 BGM 중지 (pkill)
2. 상대 포켓몬 울음소리 재생 (run_in_background: true)
3. 전투 BGM 재생 (run_in_background: true)
4. pokemon-ascii.json에서 도감번호로 전체 아트 읽기
5. 전체 아트와 함께 전투 화면 표시
```

### 데미지 계산 (1세대 공식)
```
기본 데미지 = ((2 × Level ÷ 5 + 2) × Power × A ÷ D ÷ 50 + 2)
최종 데미지 = 기본 데미지 × STAB × 타입상성 × 급소 × 난수
```

### 타입 상성
- **효과 굉장함 (2배)**: 상성 유리
- **효과 별로 (0.5배)**: 상성 불리
- **효과 없음 (0배)**: 면역

### 상태이상

| 상태 | 효과 |
|------|------|
| 독 | 매 턴 HP 1/16 감소 |
| 화상 | 매 턴 HP 1/16, 공격력 1/2 |
| 마비 | 속도 1/4, 25% 행동불가 |
| 잠듦 | 1~3턴 행동불가 |
| 얼음 | 행동불가, 10% 해동 |
| 혼란 | 50% 자해 |

### 1세대 버그 재현
1. 에스퍼 vs 고스트: 0배 (원래 2배)
2. 포커스 에너지: 급소율 1/4 감소 (원래 증가)
3. 독 vs 벌레: 2배 (원래 1배)

---

## 세이브 시스템

### 저장
- 수동 저장: "저장" 또는 "저장 [슬롯번호]"
- 자동 저장: 포켓몬 센터, 도시 진입, 전투 후

### 세이브 슬롯 (10개 + 자동저장)
| 명령어 | 설명 |
|--------|------|
| 저장 [1-10] | 특정 슬롯에 저장 |
| 불러오기 [1-10] | 특정 슬롯 불러오기 |
| 세이브 목록 | 모든 슬롯 확인 |

---

## 체육관 정보

| 순서 | 도시 | 관장 | 타입 | 뱃지 |
|------|------|------|------|------|
| 1 | 회색시티 | 웅 | 바위 | 회색뱃지 |
| 2 | 블루시티 | 이슬 | 물 | 블루뱃지 |
| 3 | 갈색시티 | 마티스 | 전기 | 오렌지뱃지 |
| 4 | 무지개시티 | 민화 | 풀 | 레인보우뱃지 |
| 5 | 연보라시티 | 독수 | 독 | 핑크뱃지 |
| 6 | 황금시티 | 초련 | 에스퍼 | 골드뱃지 |
| 7 | 홍련마을 | 강연 | 불꽃 | 크림슨뱃지 |
| 8 | 상록시티 | 비주기 | 땅 | 그린뱃지 |

---

## 데이터 파일 참조

### 포켓몬 데이터
- `data/pokemon/species.json`: 151마리 종족 데이터
- `data/pokemon/learnsets.json`: 레벨업 기술
- `data/pokemon/evolutions.json`: 진화 조건

### 기술/타입 데이터
- `data/moves/moves.json`: 165개 기술
- `data/types/chart.json`: 15타입 상성표

### 월드 데이터
- `data/world/locations.json`: 마을/도로
- `data/world/encounters.json`: 야생 출현
- `data/world/trainers.json`: 트레이너

### 오디오 데이터
- `data/audio/bgm-mapping.json`: 45곡 BGM 매핑
- `data/audio/cries-mapping.json`: 151마리 울음소리

### ASCII 아트
- `data/sprites/pokemon-ascii.json`: 전체 아트
- `data/sprites/pokemon-ascii-mini.json`: 축소 아트
- `data/sprites/npc_ascii/`: NPC 축소 아트 (개별 파일)

---

## 주의사항

1. **세이브 필수**: 중요한 이벤트 전에 저장하세요
2. **상성 확인**: 전투 전 타입 상성을 확인하세요
3. **PP 관리**: 기술의 PP가 0이 되면 사용 불가
4. **포켓몬 센터**: HP와 PP를 무료로 회복

---

## References (상세 가이드)

상세한 시스템 정보는 다음 문서를 참조하세요:

- [BGM 시스템 가이드](references/bgm-guide.md) - BGM 자동재생, 명령어, 이벤트 매핑
- [기술 효과음 가이드](references/sfx-guide.md) - 기술별 효과음, 다운로드 방법
- [ASCII 아트 가이드](references/ascii-guide.md) - ASCII 아트 사용 규칙, 데이터 파일
- [울음소리 가이드](references/cries-guide.md) - 울음소리 재생 시점, 명령어
- [데이터 무결성 가이드](references/data-integrity.md) - 데이터 검증 규칙, 체크리스트

---

## 도움말

게임 중 언제든지 다음 명령어를 사용할 수 있습니다:
- "도움말" - 명령어 목록
- "현재 위치" - 현재 장소 정보
- "진행 상황" - 스토리 진행도
